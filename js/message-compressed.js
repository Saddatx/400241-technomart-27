var messageLink=document.querySelector(".popup-lost-link"),messagePopup=document.querySelector(".lost-message"),messageClose=messagePopup.querySelector(".modal-close"),messageForm=messagePopup.querySelector("form"),userName=messagePopup.querySelector("[name=lost-name]"),userMessage=messagePopup.querySelector("[name=lost-message]"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("userName")}catch(e){isStorageSupport=!1}function fly(){messagePopup.classList.remove("modal-error"),messagePopup.classList.remove("lost-message-hide"),messagePopup.offsetWidth=messagePopup.offsetWidth,messagePopup.classList.add("lost-message-hide"),messageForm.reset()}messageLink.addEventListener("click",function(e){e.preventDefault(),messagePopup.classList.remove("modal-error"),messagePopup.classList.remove("lost-message-hide"),messagePopup.classList.add("lost-message-show"),storage?(userName.value=storage,userMessage.focus()):userName.focus()}),messageClose.addEventListener("click",function(e){e.preventDefault(),fly(),setTimeout(function(){messagePopup.classList.remove("lost-message-show")},500)}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),messagePopup.classList.contains("lost-message-show")&&(fly(),setTimeout(function(){messagePopup.classList.remove("lost-message-show")},500)))}),messageForm.addEventListener("submit",function(e){userName.value&&userMessage.value?isStorageSupport&&localStorage.setItem("userName",userName.value):(e.preventDefault(),messagePopup.classList.remove("modal-error"),messagePopup.offsetWidth=messagePopup.offsetWidth,messagePopup.classList.add("modal-error"))});